<template>
  <div class="mypage mt40">
    <div class="main-point-text closet-title">나의 정보관리</div>
    <div class="closet-title-text mt15">
      안전하게 보호하기 위해 비밀번호를<br/>
      다시 한번 확인 합니다.
    </div>
    <div class="security-input">
      <div class="inputGroup">
        <input id="pwdInput" type="password" name="password" class="form-login-group mt12" placeholder="비밀번호" style="width: 33%;" v-validate="'required'" @keydown="$common.submitEvt($event, passwordCheck)"/>
        <div id="pwdIntv" style="display: inline-table; width: 1%;"></div>
        <button id="pwdBtn" class="button-login" style="width: 10%;" @click="passwordCheck">확인</button>
      </div>
    </div>
  </div>
</template>

<script>
import { mapActions, mapGetters } from 'vuex';

export default {
  name: 'mypageSecurity',
  computed: {
    ...mapGetters({
      mypageAuth: 'mypage/getMypageAuth',
    }),
  },
  methods: {
    ...mapActions({
      mypageSecurity: 'mypage/mypageSecurity',
    }),
    async passwordCheck() {
      const pwd = document.querySelector('input[name=password]');

      if (!this.$common.InputDataValidation(pwd, '비밀번호를 입력해주세요.', true)) return;
      await this.mypageSecurity({ password: pwd.value });

      if (this.mypageAuth) this.$router.push({ path: '/closet/mypage' });
    },
  },
};
</script>

<style scoped>
.mypage {
}

.security-input {
  margin-top: 30px;
}

@media screen and (max-width: 486px) {
  #pwdInput {
    width: 60% !important;
  }

  #pwdIntv {
    width: 1% !important;
  }

  #pwdBtn {
    width: 38.6% !important;
  }
}
</style>
